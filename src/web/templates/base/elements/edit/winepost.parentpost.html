{% load static %}
{% load widget_tweaks %}
{% load web_extras %}
{% load i18n %}
<script>
    var current_user_id = '{{current_user.id}}'
</script>
<div class="row" style="padding-top: 25px; padding-bottom: 25px;">
    <div class="col-sm-5">
        <div class="aye" style="">
            {% if is_scanned %}
            <strong>Added by scanning.</strong>
            {% else %}
            <strong>Added by auto-completion.</strong>
            {% endif %}
        </div>

        <div class="aye" style="width:200px!important;">
            <h6><b>Vuforia image:</b></h6>
            {% if post_vuforia_url %}
                <img id="ref-img" data-image-exists="no" src="{{ post_vuforia_url }}" alt="{{ post.title }}" style="width:200px!important; height:200px!important;" class="img-winepost" />
            {% else %}
                <img id="ref-img" data-image-exists="yes" src="{% static 'assets/img/missing.gif' %}" style="width:200px!important; height:200px!important;" alt="{{ post.title }}" class="img-winepost" />
            {% endif %}
        </div>
        <div class="aye" style="margin-top: 15px; margin-bottom: 15px;">
            <button id="open_photo_editor" class="btn btn-lg btn-success">Edit photo</button>
            <button id="open_photo_editor_blank" class="btn btn-lg btn-primary">Blank photo</button>
        </div>

        <div class="aye" style="margin-top: 15px; ">
            VUFORIA RATING: <strong>{{ rating }}</strong>
        </div>

        <div class="aye" style="margin-bottom: 15px;">
            <a href="#" onclick="refresh_vuforia_image(); return false;" class="re-upload-image-btn">Re-Upload image <i class="fa fa-refresh"></i></a>
        </div>

        <div class="aye">
        </div>

        <div class="aye">
            <h6><b>Label:</b></h6>
            {% if post.wine.main_image %}
                <img id="primary-img" data-image-exists="no" src="{{ post.wine.get_square_image_url }}" alt="{{ post.title }}" style="width:200px!important; height:200px!important;" class="img-winepost" />
                <button id="set_as_vuforia1" data-what="primary" class="btn btn-lg btn-info set-as-vuforia">Move to Vuforia image</button>
            {% else %}
            <img id="primary-img" data-image-exists="yes" src="{% static 'assets/img/missing.gif' %}" style="width:200px!important; height:200px!important;" alt="{{ post.title }}" class="img-winepost" />
            {% endif %}
            {{ form.wine_image }}
        </div>

        <div class="aye">
            <h6><b>Posted by the user:</b></h6>
            {% if post.main_image %}
                <img id="secondary-img" src="{{ post.get_post_square_image_url }}" style="width:200px!important; height:200px!important;" alt="{{ post.title }}" class="img-winepost" />
                <button id="set_as_vuforia2" data-what="secondary" class="btn btn-lg btn-info set-as-vuforia">Move to Vuforia image</button>
            {% else %}
            <img id="secondary-img" src="{% static 'assets/img/missing.gif' %}" style="width:200px!important; height:200px!important;" alt="{{ post.title }}" class="img-winepost" />
            {% endif %}
            {{ form.image }}
        </div>

        <div class="form-group mt-3">
            <label for="jq-validation-team_comments" class="col-sm-12 control-label comment_by_team">
                {{ form.team_comments.label }}
                <span class="comment_info">
                    <p>No comments made yet.</p>
                    <a href="javascript:;" class="addComment" onclick="showCommentBox();"><i class="fa fa-comments"></i> Add Comment</a>
                </span>
            </label>
            <div class="comment_box">
                {% if form.team_comments.errors %}
                    {{ form.team_comments|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.team_comments|add_class:"form-control" }}
                {% endif %}
                <div class="actionButtons">
                    <button type="button" class="btn_addComment" onclick="addComment();">Add</button>
                    <button type="button" class="btn_updateComment" onclick="updateComment();">Update</button>
                </div>
            </div>
            <div class="commentList">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Comment(s)</th>
                            <th>action</th>
                        </tr>
                    </thead>
                    <tbody id="commentList"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="col-sm-4" style="padding-top:50px;">
        <div class="form-group row">
            <label for="{{ form.name.id_for_label }}" class="col-sm-3 control-label">{{ form.name.label }}</label>
            <div class="col-sm-9">
                {% if form.name.errors %}
                    {{ form.name|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.name|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="{{ form.name.id_for_label }}" class="col-sm-3 control-label">{{ form.name_short.label }}</label>
            <div class="col-sm-9">
                {% if form.name_short.errors %}
                    {{ form.name_short|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.name_short|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="{{ form.winemaker.id_for_label }}" class="col-sm-3 control-label">{{ form.winemaker.label }}</label>
            <div class="col-sm-9">
                {{ form.winemaker|add_class:"form-control" }}

                {% if form.winemaker.errors %}
                    <input type="hidden" id="winemaker_errors" value="1" />
                    {# <!--{{ form.winemaker|add_class:"form-control error-field" }}--> #}
                {% else %}
                    <input type="hidden" id="winemaker_errors" value="0"/>
                {% endif %}
            </div>
        </div>
        <div class="form-group row">
            <label for="{{ form.domain.id_for_label }}" class="col-sm-3 control-label">{{ form.domain.label }}</label>
            <div class="col-sm-9">
                {% if form.domain.errors %}
                    {{ form.domain|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.domain|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="{{ form.designation.id_for_label }}" class="col-sm-3 control-label">{{ form.designation.label }}</label>
            <div class="col-sm-9">
                {% if form.designation.errors %}
                    {{ form.designation|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.designation|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="{{ form.color.id_for_label }}" class="col-sm-3 control-label" >{{ form.color.label }}</label>
            <div class="col-sm-5">
                {% if form.color.errors %}
                    {{ form.color|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.color|add_class:"form-control" }}
                {% endif %}
            </div>
            <div class="col-sm-4 small-checkbox-with-label">
                {{ form.is_sparkling}}
                <label for="{{ form.is_sparkling.id_for_label }}" class="">{{ form.is_sparkling.label }}</label>
            </div>
        </div>

        <div class="form-group row">
            <label for="{{ form.year.id_for_label }}" class="col-sm-3 control-label">{{ form.year.label }}</label>
            <div class="col-sm-9">
                {% if form.year.errors %}
                    {{ form.year|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.year|add_class:"form-control" }}
                {% endif %}
            </div>
            <div class="col-sm-3">&nbsp;</div>
            <div class="col-sm-9 all-winepost-years" id="all_years">&nbsp;</div>
        </div>

        <div class="form-group row">
            <label for="{{ form.grape_variety.id_for_label }}" class="col-sm-3 control-label">{{ form.grape_variety.label }}</label>
            <div class="col-sm-9">
                {% if form.grape_variety.errors %}
                    {{ form.grape_variety|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.grape_variety|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="jq-validation-wine_trade" class="col-sm-3 control-label">
                {{ form.wine_trade.label }}
            </label>
            <div class="col-sm-9">
                {{ form.wine_trade }}
            </div>
        </div>

        <div class="form-group row">
            <label for="jq-validation-certification" class="col-sm-3 control-label">
                {% trans 'Certification' %}
            </label>
            <div class="col-sm-4 text-left chspace">
                {{ form.is_organic }}
                {{ form.is_organic.label }}
            </div>
            <div class="col-sm-5 text-left chspace">
                {{ form.is_biodynamic }}
                {{ form.is_biodynamic.label }}
            </div>
        </div>
        <div class="form-group row">
            <label for="jq-validation-certified_by" class="col-sm-3 control-label">
                {{ form.certified_by.label }}
            </label>
            <div class="col-sm-9">
                {% if form.certified_by.errors %}
                    {{ form.certified_by|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.certified_by|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div class="form-group row">
            <label for="jq-validation-free_so2" class="col-sm-3 control-label">
                {{ form.free_so2.label }}
            </label>
            <div class="col-sm-9">
                {% if form.free_so2.errors %}
                    {{ form.free_so2|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.free_so2|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>
        <div class="form-group row">
            <label for="jq-validation-total_so2" class="col-sm-3 control-label">
                {{ form.total_so2.label }}
            </label>
            <div class="col-sm-9">
                {% if form.total_so2.errors %}
                    {{ form.total_so2|add_class:"form-control error-field" }}
                {% else %}
                    {{ form.total_so2|add_class:"form-control" }}
                {% endif %}
            </div>
        </div>

        <div style="width: 100%;">
            <p>File analysis:</p>
            <div class="container-current-wm-files" id="container-other-files"></div>
            <div id="dropzonejs-wm-files" class="dropzone-box">
                <div class="dz-default dz-message">
                    <i class="fa fa-cloud-upload"></i>
                    Drop files in here<br><span class="dz-text-small">or click to pick manually</span>
                </div>
                <!--<form action="//dummy.html">-->
                    <div class="fallback">
                        <input name="file" type="file" multiple="" />
                    </div>
                <!--</form>-->
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.description.id_for_label }}" class="control-label">{{ form.description.label }}</label>
            <div class="form-group">
                {% if form.description.errors %}
                {{ form.description|add_class:"form-control error-field"|attr:"rows:9"|attr:"style: font-size:14px;;"   }}
                {% else %}
                {{ form.description|add_class:"form-control"|attr:"rows:9"|attr:"style: font-size:14px;;"   }}
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.geolocation.id_for_label }}" class="control-label" >{{ form.geolocation.label }}</label>

            <div class="form-group geolocation-input-row">
                {{ form.geolocation|add_class:"form-control"|attr:"placeholder:Place name"|attr:"style:width:330px;"}}
                <a id="geolocation_url" href="{{ geolocation_url }}" title="{{ geolocation_title }}" target="_blank">
                    <i class="fa fa-map-marker"></i>
                </a>
            </div>
            <div class="review">
                {% if some_star_review and some_parent_post %}
                    <span class="display-natural" style="{{ el_style_natural }}">
                        <span class="starreview" style="font-size: 12px;"><strong>Star Review</strong></span> is <a href="{% url 'edit_winepost' id=some_star_review.id %}">here</a>&nbsp;&nbsp; - &nbsp;
                        <span class="btn-label icon fa fa-bookmark-o"></span>&nbsp;<strong>Parent Post</strong> is <a href="{% url 'edit_winepost' id=some_parent_post.id %}">here</a>
                    </span>
                    <span class="display-other" style="{{ el_style_other }}">
                        <span class="btn-label icon">®️</span>&nbsp;<strong>Referrer</strong> is <a href="{% url 'edit_winepost' id=some_parent_post.id %}">here</a>
                    </span>
                {% elif some_star_review %}
                    <span class="display-natural" style="{{ el_style_natural }}">
                        <span class="starreview" style="font-size: 12px;"><strong>Star Review</strong></span> is <a href="{% url 'edit_winepost' id=some_star_review.id %}">here</a>&nbsp;&nbsp;&nbsp;
                    </span>
                    <span class="display-other" style="{{ el_style_other }}"></span>
                {% elif some_parent_post %}
                    <span class="display-natural" style="{{ el_style_natural }}">
                        <span class="btn-label icon fa fa-bookmark-o"></span>&nbsp;<strong>Parent Post</strong> is <a href="{% url 'edit_winepost' id=some_parent_post.id %}">here</a>
                    </span>
                    <span class="display-other" style="{{ el_style_other }}">
                        <span class="btn-label icon">®️</span>&nbsp;<strong>Referrer</strong> is <a href="{% url 'edit_winepost' id=some_parent_post.id %}">here</a>
                    </span>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmDelete" tabindex="-1" data-backdrop="static" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                <p class="lead">{% trans 'Are you sure you want to delete this comment?' %}</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">
                    {% trans 'Cancel' %}
                </button>
                <button type="button" class="btn btn-success confirmDelete" data-dismiss="modal">
                    {% trans 'Confirm' %}
                </button>
            </div>
        </div>
    </div>
</div>
